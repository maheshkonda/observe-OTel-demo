# Observe data token
token: "ds1AEsvQpa8UJDjjuhmT:gNLdatk0suYdKSq1UmiO8lOMls6LTvo-"

# Target Observe collection url
observe_url: "https://111574648308.collect.observeinc.com/"

# Debug mode - Sets agent log level to debug
debug: false

# collect metrics and logs pertaining to the agent itself
self_monitoring:
  enabled: true

# collect metrics and logs about the host system
host_monitoring:
  enabled: true
  # collect logs of all running processes from the host system
  logs: 
    enabled: true
  metrics:
    # collect metrics about the host system
    host:
      enabled: true
    # collect metrics about the processes running on the host system
    process:
      enabled: false

# this should be added to the existing observe-agent.yaml
otel_config_overrides:
  processors:
    filter/metrics:
      metrics:
        include:
          match_type: regexp
          metric_names:
            - process\..*\.time
            - system\.cpu\..*
            - .*\.utilization
  service:
    pipelines:
      metrics/forward:
        receivers: [otlp]
        processors: [resourcedetection, resourcedetection/cloud, filter/metrics]
        exporters: [otlphttp/observe]
      metrics/host_monitoring_host:
        receivers: [hostmetrics/host-monitoring-host]
        processors:
          [
            memory_limiter,
            resourcedetection,
            resourcedetection/cloud,
            batch,
            filter/metrics,
          ]
        exporters: [otlphttp/observe]
      metrics/agent-filestats:
        receivers: [filestats/agent]
        processors: [resourcedetection, resourcedetection/cloud, filter/metrics]
        exporters: [otlphttp/observe]
      metrics/agent-internal:
        receivers: [prometheus/agent, count]
        processors:
          [
            memory_limiter,
            transform/truncate,
            resourcedetection,
            resourcedetection/cloud,
            batch,
            filter/metrics,
          ]
        exporters: [otlphttp/observe]
# this should be added to the existing observe-agent.yaml
otel_config_overrides:
  processors:
    filter/metrics:
      metrics:
        include:
          match_type: regexp
          metric_names:
            - process\..*\.time
            - system\.cpu\..*
            - .*\.utilization
  service:
    pipelines:
      metrics/forward:
        receivers: [otlp]
        processors: [resourcedetection, resourcedetection/cloud, filter/metrics]
        exporters: [otlphttp/observe]
      metrics/host_monitoring_host:
        receivers: [hostmetrics/host-monitoring-host]
        processors:
          [
            memory_limiter,
            resourcedetection,
            resourcedetection/cloud,
            batch,
            filter/metrics,
          ]
        exporters: [otlphttp/observe]
      metrics/host_monitoring_process:
        receivers: [hostmetrics/host-monitoring-process]
        processors:
          [
            memory_limiter,
            resourcedetection,
            resourcedetection/cloud,
            batch,
            filter/metrics,
          ]
        exporters: [otlphttp/observe]
      metrics/agent-filestats:
        receivers: [filestats/agent]
        processors: [resourcedetection, resourcedetection/cloud, filter/metrics]
        exporters: [otlphttp/observe]
      metrics/agent-internal:
        receivers: [prometheus/agent, count]
        processors:
          [
            memory_limiter,
            transform/truncate,
            resourcedetection,
            resourcedetection/cloud,
            batch,
            filter/metrics,
          ]
        exporters: [otlphttp/observe]
# this should be added to the existing observe-agent.yaml
otel_config_overrides:
  processors:
    probabilistic_sampler:
      sampling_percentage: 50.0

  service:
    pipelines:
      traces/forward:
        receivers: [otlp]
        processors: [probabilistic_sampler]
        exporters: [debug]